<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compteur de Points</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="auth-ecran" class="input-group">
        <h3>Mon Compte</h3>
        <input type="email" id="auth-email" placeholder="Email">
        <input type="password" id="auth-password" placeholder="Mot de passe">
        <button id="auth-signup">CrÃ©er un compte</button>
        <button id="auth-login">Se Connecter</button>
        <p id="auth-erreur" class="erreur-msg cache"></p>
    </div>

    <div id="user-ecran" class="cache input-group">
        <p>ConnectÃ© en tant que <strong id="user-email"></strong></p>
        <button id="auth-logout">Se DÃ©connecter</button>
        
        <hr style="width:100%; margin: 15px 0;">
        <h3>Mes Parties SauvegardÃ©es (en cours)</h3>
        <div id="liste-parties-sauvegardees">Chargement...</div>
        
        <hr style="width:100%; margin: 15px 0;">
        <h3>Mon Historique de Parties (terminÃ©es)</h3>
        <div id="liste-historique-parties">Chargement...</div>
        
        <button id="lancer-nouvelle-partie-btn" style="margin-top: 15px;">+ Commencer une nouvelle partie</button>
    </div>

    <div id="configuration-ecran" class="cache">
        
        <h2>ğŸ² Nouvelle Partie</h2>

        <div class="input-group">
            <input type="text" id="nom-jeu-config" placeholder="Nom du jeu (ex: Skyjo, 6 qui prend!)" style="width: 300px;" list="datalist-jeux">
            <datalist id="datalist-jeux">
                </datalist>
        </div>
        
        <div class="input-group">
            <input type="text" id="nom-joueur" placeholder="Nom du joueur">
            <label for="couleur-joueur" class="label-couleur">Couleur :</label>
            <input type="color" id="couleur-joueur" value="#FF6384">
            <button id="ajouter-joueur">Ajouter</button>
        </div>
        
        <div id="suggestions-joueurs" class="input-group cache">
            <h3>Joueurs rÃ©cents :</h3>
            <div id="liste-suggestions-joueurs" style="width: 100%;">
                </div>
        </div>

        <div id="liste-joueurs-conf" class="input-group">
             </div>

        <div class="input-group">
            <div class="option-secret">
                <input type="checkbox" id="mode-secret-config">
                <label for="mode-secret-config">Garder les scores secrets jusqu'Ã  la fin</label>
            </div>
            <div class="option-victoire input-group">
                <strong>Objectif du jeu :</strong>
                <label><input type="radio" name="condition-victoire" value="low" checked> Avoir le MOINS de points</label>
                <label><input type="radio" name="condition-victoire" value="high"> Avoir le PLUS de points</label>
            </div>
            <button id="demarrer-partie" disabled>DÃ©marrer la partie</button>
        </div>
    </div>

    <div id="score-ecran" class="cache">
        <h2>ğŸ† Scores en cours</h2>
        <div id="compteurs-manches">
            <p>Manches jouÃ©es : <strong id="manches-passees">0</strong></p>
            <p id="manches-restantes-affichage" class="cache">Manches restantes : <strong id="manches-restantes">--</strong></p>
            <p id="points-restants-affichage" class="cache">Points avant limite : <strong id="points-restants">--</strong></p>
        </div>
        <div class="score-main-container">
            <div class="score-gauche">
                <div id="score-affichage"></div>
                <div class="graphique-container input-group">
                    <h3>ğŸ“ˆ Ã‰volution des Scores</h3>
                    <canvas id="graphique-scores"></canvas>
                </div>
                <div class="input-tour">
                    <h3>Nouveau Tour</h3>
                    <div id="saisie-points"></div>
                    <button id="valider-tour">Valider le Tour</button>
                </div>
            </div>
            <div class="score-droite">
                <h3>Conditions d'ArrÃªt :</h3>
                <div class="fin-partie-options input-group">
                    <label>
                        <input type="checkbox" class="condition-checkbox" id="check-score-limite" data-type="score_limite">
                        ArrÃªter quand un joueur atteint <input type="number" id="score-limite" min="1" value="100" disabled> points (Total).
                    </label><br>
                    <label>
                        <input type="checkbox" class="condition-checkbox" id="check-score-relatif" data-type="score_relatif">
                        ArrÃªter quand un joueur a marquÃ© <input type="number" id="score-relatif" min="1" value="50" disabled> points de plus que maintenant.
                    </label><br>
                    <label>
                        <input type="checkbox" class="condition-checkbox" id="check-manche-total" data-type="manche_total">
                        ArrÃªter aprÃ¨s un total de <input type="number" id="nb-manches-total" min="1" value="10" disabled> manches.
                    </label><br>
                    <label>
                        <input type="checkbox" class="condition-checkbox" id="check-manche-restante" data-type="manche_restante">
                        ArrÃªter dans <input type="number" id="nb-manches-restantes" min="1" value="3" disabled> manches restantes.
                    </label>
                </div>
                
                <button id="sauvegarder-partie" style="background-color: #28a745; width: 100%;">Sauvegarder la partie</button>
                <p id="save-feedback" class="cache" style="color: green; text-align: center;"></p>
                <button id="arreter-maintenant" class="bouton-fin">Terminer la partie Maintenant</button>
            </div>
        </div>
    </div>

    <div id="reveal-ecran" class="cache">
        <div id="reveal-content">
            <h3 id="reveal-rang">5Ã¨me Place</h3>
            <div class="reveal-nom-container">
                <h2 id="reveal-nom-placeholder">???</h2>
                <h2 id="reveal-nom">Nom du Joueur</h2>
            </div>
            <p id="reveal-score">0 points</p>
        </div>
        <button id="skip-all-btn" class="bouton-fin">Passer l'animation</button>
    </div>

    <div id="podium-ecran" class="cache">
        <h2>ğŸ‰ Podium Final !</h2>
        <div id="podium-visuel">
            <div class="podium-place" id="podium-2">
                <span class="podium-medaille">ğŸ¥ˆ</span>
                <div class="podium-nom">...</div>
                <div class="podium-score">...</div>
            </div>
            <div class="podium-place" id="podium-1">
                <span class="podium-medaille">ğŸ¥‡</span>
                <div class="podium-nom">...</div>
                <div class="podium-score">...</div>
            </div>
            <div class="podium-place" id="podium-3">
                <span class="podium-medaille">ğŸ¥‰</span>
                <div class="podium-nom">...</div>
                <div class="podium-score">...</div>
            </div>
        </div>
        <div id="autres-joueurs" class="input-group">
            <h3>Autres Joueurs</h3>
            <ul id="autres-joueurs-liste"></ul>
        </div>
        <div id="graphique-final-container" class="input-group"></div>

        <button id="retour-accueil-btn" class="bouton-fin" style="background-color: #6c757d; margin-top: 20px;">Retour Ã  l'accueil</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-auth-compat.js"></script>

    <script>
      // Ta configuration Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyD1cC-bahvm3fqZcsYYiBvolyaqVyMGXnI",
        authDomain: "compteur-point-julien.firebaseapp.com",
        projectId: "compteur-point-julien",
        storageBucket: "compteur-point-julien.appspot.com",
        messagingSenderId: "961827366523",
        appId: "1:961827366523:web:51db1d7ac1f975f569e4de"
      };

      // Initialise Firebase
      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore(); // RÃ©fÃ©rence Ã  Firestore
    </script>
    
    <script src="script.js"></script>

</body>
</html>
